{% extends "base.html" %}

{% block content %}
    <form action="" method="POST" enctype="multipart/form-data">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for msg in messages %}
                    <p>{{ msg }}</p>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="container" style="background-color: lightsteelblue">
            <label>Project
                <input type="text" name="project" maxlength="40" required/>
            </label>
            <label>Priority
                <select name="priority">
                    <option value="Minor">Minor</option>
                    <option value="Normal">Normal</option>
                    <option value="Major">Major</option>
                    <option value="Critical">Critical</option>
                    <option value="Showstopper">Show-Stopper</option>

                </select>
            </label>
            <label>Status
                <select name="status" id="status">
                    <option value="Open">Open</option>
                    <option value="In-Progress">In-Progress</option>
                    <option value="Fixed">Fixed</option>
                    <option value="Closed">Closed</option>
                    <option value="Reopened">Reopened</option>

                </select>
            </label>
            <label>Summary
                <input type="input" name="summary" maxlength="50" required/>
            </label>
            <label>Description
                <textarea name="description" rows="4" cols="50" maxlength="500" required></textarea>
            </label>
            <label>Assignee
                <input type="input" name="assignee" maxlength="40" required/>
            </label>
            <label>Image
                <input type="file"
                       name="file"
                       accept="image/*"
                       onchange="loadFile(event)"
                       oninput="filesize(this);"/>
            </label>
            <p><img id="attached_image" width="400"/></p>
            <script>
                function filesize(elem) {
                    document.cookie = `filesize=${elem.files[0].size}`
                }
            </script>

            <script>
                var loadFile = function (event) {
                    var image = document.getElementById('attached_image');
                    image.src = URL.createObjectURL(event.target.files[0]);
                };
            </script>

            <input type="submit" name="submit" value="OK"/>
            <input type="submit" name="submit" value="Cancel" onclick="window.history.go(-1); return false;"/>

        </div>

    </form>
{% endblock %}